<div class="slider">
    {{ with .Get "dir" }}
      {{ $dir := . }}
      {{ $images := readDir (printf "static/%s" $dir) }}
      <button class="prev-btn">&lt;</button>
      <div class="slider-container">
        {{ range $index, $file := $images }}
          {{ if or (strings.HasSuffix $file.Name ".jpg") (strings.HasSuffix $file.Name ".png") (strings.HasSuffix $file.Name ".webp") (strings.HasSuffix $file.Name ".gif") }}
            <img src="/{{ $dir }}/{{ $file.Name }}" alt="{{ $file.Name }}" loading="lazy" class="slide">
          {{ end }}
        {{ end }}
      </div>
      <button class="next-btn">&gt;</button>
    {{ end }}
  </div>
  <style>
    .slider {
      position: relative;
      width: 100%;
      overflow: hidden;
      text-align: center;
    }
    .slider-container {
      display: flex;
      width: 100%;
      transition: transform 0.5s ease;
    }
    .slide {
      min-width: 100%;
      height: auto;
      object-fit: cover;
    }
    .prev-btn, .next-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background-color: rgba(0, 0, 0, 0.5);
      color: white;
      border: none;
      width: 30px;
      height: 30px;
      font-size: 20px;
      cursor: pointer;
      z-index: 10;
      padding: 0;
      line-height: 30px;
    }
    .prev-btn {
      left: 10px;
    }
    .next-btn {
      right: 10px;
    }
    .prev-btn:hover, .next-btn:hover {
      background-color: rgba(0, 0, 0, 0.8);
    }
  </style>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const slides = document.querySelectorAll(".slide");
      const container = document.querySelector(".slider-container");
      const prevBtn = document.querySelector(".prev-btn");
      const nextBtn = document.querySelector(".next-btn");
      let currentSlide = 0;
  
      function updateSlide() {
        container.style.transform = `translateX(-${currentSlide * 100}%)`;
        if (currentSlide === 0) {
          container.style.transition = "none";
          setTimeout(() => {
            container.style.transition = "transform 0.5s ease";
          }, 50);
        }
      }
  
      prevBtn.addEventListener("click", () => {
        currentSlide = (currentSlide - 1 + slides.length) % slides.length;
        updateSlide();
      });
  
      nextBtn.addEventListener("click", () => {
        currentSlide = (currentSlide + 1) % slides.length;
        updateSlide();
      });
  
      // Auto-slide every 3 seconds
      let slideInterval = setInterval(() => {
        currentSlide = (currentSlide + 1) % slides.length;
        updateSlide();
      }, 3000);
  
      // Pause on hover
      container.addEventListener("mouseover", () => clearInterval(slideInterval));
      container.addEventListener("mouseout", () => {
        slideInterval = setInterval(() => {
          currentSlide = (currentSlide + 1) % slides.length;
          updateSlide();
        }, 3000);
      });
    });
  </script>